<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module provides traits for calling rust functions dynamically. All functions which implement the DynamicFunction trait can be called by passing an array of [`Any`]s to it. The return value is again of type [`Any`]."><meta name="keywords" content="rust, rustlang, rust-lang, dynamic_function"><title>puffin::algebra::dynamic_function - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-93196c7a1c3542a8.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../../../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../../../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../puffin/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../puffin/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module dynamic_function</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">puffin</a>::<wbr><a href="../index.html">algebra</a>::<wbr><a class="mod" href="#">dynamic_function</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/puffin/algebra/dynamic_function.rs.html#1-339">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module provides traits for calling rust functions dynamically.
All functions which implement the DynamicFunction trait can be called by passing an array of
<a href="https://doc.rust-lang.org/1.68.2/core/any/trait.Any.html" title="Any"><code>Any</code></a>s to it. The return value is again of type <a href="https://doc.rust-lang.org/1.68.2/core/any/trait.Any.html" title="Any"><code>Any</code></a>.</p>
<p>Rust is a statically typed language. That means the compiler would be able to statically verify
that a term evaluates without any type errors.</p>
<p>While this is generally an advance, in the case of our fuzzer this is not very helpful.
The fuzzer should be able to mutate the term trees arbitrarily. Of course, we also have
to check for the types during runtime. If types are not compatible then, the evaluation
of the term will fail. But this is not something that can be done during compile time.
Therefore, we introduced a trait for dynamically typed functions on top of statically
typed Rust functions.</p>
<p>Each function which implements the following trait can be made into a dynamic function:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>puffin::algebra::error::FnError;

<span class="kw">type </span>ConcreteFunction&lt;A1, A2, A3, R&gt; = <span class="kw">dyn </span>Fn(A1, A2, A3) -&gt; <span class="prelude-ty">Result</span>&lt;R, FnError&gt;;</code></pre></div>
<p>where <code>A1</code>, <code>A2</code>, <code>A3</code> are argument types and <code>R</code> is the return type. From these statically
typed function we can generate dynamically types ones which implement the following trait:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>puffin::algebra::error::FnError;
<span class="kw">use </span>std::any::Any;

<span class="kw">pub trait </span>DynamicFunction: Fn(<span class="kw-2">&amp;</span>Vec&lt;Box&lt;<span class="kw">dyn </span>Any&gt;&gt;) -&gt; <span class="prelude-ty">Result</span>&lt;Box&lt;<span class="kw">dyn </span>Any&gt;, FnError&gt; {
}</code></pre></div>
<p>Note, that both functions return a <code>Result</code> and therefore can gracefully fail.</p>
<p><code>DynamicFunctions</code> can be called with an array of any type. The result type is also arbitrary.
Rust offers a unique ID for each type. Using this type we can check during runtime whether
types are available. The types of each variable, constant and function are preserved and
stored alongside the <code>DynamicFunction</code>.</p>
<p>The following function is a simple example for a constant:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>puffin::algebra::error::FnError;

<span class="kw">pub fn </span>fn_some_value() -&gt; <span class="prelude-ty">Result</span>&lt;u32, FnError&gt; {
    <span class="prelude-val">Ok</span>(<span class="number">42</span>)
}</code></pre></div>
<p>It returns one possibility for the cipher suites which could be sent during a <code>ClientHello</code>.</p>
</div></details><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.dynamic_fn.html" title="puffin::algebra::dynamic_function::dynamic_fn macro">dynamic_fn</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DynamicFunctionShape.html" title="puffin::algebra::dynamic_function::DynamicFunctionShape struct">DynamicFunctionShape</a></div><div class="item-right docblock-short">Describes the shape of a <a href="trait.DynamicFunction.html" title="DynamicFunction"><code>DynamicFunction</code></a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TypeShape.html" title="puffin::algebra::dynamic_function::TypeShape struct">TypeShape</a></div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.DescribableFunction.html" title="puffin::algebra::dynamic_function::DescribableFunction trait">DescribableFunction</a></div><div class="item-right docblock-short">This trait is implemented for function traits in order to:</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.DynamicFunction.html" title="puffin::algebra::dynamic_function::DynamicFunction trait">DynamicFunction</a></div><div class="item-right docblock-short">Cloneable type for dynamic functions. This trait is automatically implemented for arbitrary
closures and functions of the form: <code>Fn(&amp;Vec&lt;Box&lt;dyn Any&gt;&gt;) -&gt; Box&lt;dyn Any&gt;</code></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.format_args.html" title="puffin::algebra::dynamic_function::format_args fn">format_args</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.hash_type_id.html" title="puffin::algebra::dynamic_function::hash_type_id fn">hash_type_id</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Hashes <a href="https://doc.rust-lang.org/1.68.2/core/any/struct.TypeId.html" title="TypeId"><code>TypeId</code></a>s to be more readable</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.make_dynamic.html" title="puffin::algebra::dynamic_function::make_dynamic fn">make_dynamic</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="puffin" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.2 (9eb3afe9e 2023-03-27)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-08ddfdda51b8ee2e.css" ></div></body></html>